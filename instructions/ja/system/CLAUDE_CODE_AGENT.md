# Claude Codeエージェント活用ガイド

## Task toolとは
Claude Codeが提供する自律的タスク処理機能。複雑な調査や分析を、細かい指示なしで実行できる。

## 効果的な使用場面

### ✅ 向いているタスク
- **大規模調査**: 多数のファイルを横断的に分析
- **パターン検出**: コード内の特定パターンを網羅的に探索
- **影響範囲分析**: 変更による影響を包括的に調査
- **ドキュメント検証**: 実装とドキュメントの整合性確認

### ❌ 向いていないタスク
- 単一ファイルの簡単な編集
- 明確な手順が決まっている作業
- リアルタイム対話が必要な作業

## 実践例

### コード品質調査
```
「プロジェクト全体でTODOコメントを探して優先度順にリスト化して」
「100行を超える関数を特定して複雑度とともに報告して」
```

### 依存関係分析
```
「未使用のimportを全て検出して」
「このクラスを使用している全ての箇所を特定して」
```

### セキュリティ監査
```
「ハードコードされた認証情報がないか確認して」
「SQLインジェクションの可能性がある箇所を探して」
```

### テスト分析
```
「テストされていないpublic関数を全て特定して」
「テストカバレッジが50%未満のモジュールをリストアップして」
```

## プロンプトの書き方

### 良い例
```
✅ 「srcディレクトリ内で重複している関数を見つけて、統合方法を提案して」
- 明確なスコープ（srcディレクトリ）
- 具体的な目的（重複検出）
- 期待する成果（統合方法の提案）
```

### 悪い例
```
❌ 「コードを改善して」
- スコープが不明確
- 目的が曖昧
- 成果が定義されていない
```

## 実行のコツ

### 1. 段階的アプローチ
まず小規模で試し、成功したら範囲を拡大：
```
1. 「utilsフォルダ内で未使用関数を探して」
2. 「src全体で未使用関数を探して」
3. 「プロジェクト全体で未使用関数を探して」
```

### 2. 出力形式の指定
```
「結果をJSON形式で出力して」
「Markdownテーブルで整理して」
「優先度順にソートして」
```

### 3. 制約の設定
```
「最大10件まで報告して」
「重要度高のみ対象にして」
「最近1週間の変更のみ分析して」
```

## トラブルシューティング

### タスクが長時間終わらない
→ スコープを狭めるか、ファイル数を制限する

### メモリ不足エラー
→ 処理を分割して段階的に実行

### 期待と異なる結果
→ より具体的な条件や例を提供

---
## ライセンス情報
- **ライセンス**: Apache-2.0
- **作成日**: 2025-01-13