# AI指示書キット モジュールシステムの改善提案

## Issue作成日: 2025-01-26

## 概要
AI指示書キットのモジュラーシステムにおいて、モジュールのサイズ基準が不明確であり、関連ドキュメントが分散している問題について改善提案を行います。

## 背景
- モジュラーシステムは詳細版（_detailed.md）と簡潔版（.md）の2種類のモジュールを提供
- 現在、100以上のモジュールが実装されているが、サイズにばらつきが大きい
- ドキュメントが複数の場所に分散しており、統一的なガイドラインが不明確

## 問題点

### 1. サイズ基準の不統一
- ドキュメント間で異なる推奨値（詳細版の20-30% vs 30-40%）
- 実際のモジュールでは1.25倍〜6.14倍と大きな差異
- 明確な上限・下限の定義なし

### 2. 品質管理の不足
- 自動サイズチェック機能の欠如
- 1,000行を超える巨大モジュールの存在
- トークン数での管理未実装

### 3. ドキュメントの分散
- 開発ガイドが複数ファイルに分散
- 統一的な参照先の不在
- 新規開発者の学習コストが高い

## 提案内容

### 提案1: 明確なサイズ基準の策定と文書化

#### 推奨サイズ基準
```yaml
module_size_standards:
  concise_version:
    recommended_lines: 50-200
    maximum_lines: 300
    recommended_tokens: 1000-4000
    maximum_tokens: 6000
  
  detailed_version:
    recommended_lines: 200-600
    maximum_lines: 800
    recommended_tokens: 4000-16000
    maximum_tokens: 20000
  
  size_ratio:
    recommended: 2.5-4.0x
    maximum: 5.0x
```

### 提案2: 自動検証機能の実装

`validate-modules.sh`に以下の機能を追加：
- 行数チェック（推奨値・最大値）
- トークン数推定（tiktoken等を使用）
- サイズ比率の検証
- 基準超過時の警告/エラー出力

### 提案3: ドキュメントの統合

#### 新規作成: `/docs/module-development-guide.md`
統合内容：
1. モジュール概要とアーキテクチャ
2. サイズ基準と品質基準
3. 命名規則とディレクトリ構造
4. 開発手順（調査→実装→検証）
5. ベストプラクティスとアンチパターン
6. 実装例とテンプレート

#### 既存ドキュメントの整理
- 重複内容の削除
- 新ガイドへの参照リンク設置
- 古い情報のアーカイブ

### 提案4: 既存モジュールの段階的改善

#### Phase 1: 巨大モジュールの分割
対象：
- machine_learning_detailed.md (1,093行)
- parallel_distributed_detailed.md (815行)
- research_methodology_detailed.md (760行)

方法：
- サブモジュールへの分割
- 外部参照の活用
- コード例の簡潔化

#### Phase 2: 簡潔版の最適化
- 詳細版から自動生成する仕組みの検討
- エッセンス抽出のガイドライン策定

## 実装優先順位

1. **高**: サイズ基準の文書化（1週間）
2. **高**: ドキュメント統合（2週間）
3. **中**: 検証機能の実装（2週間）
4. **低**: 既存モジュールの改善（継続的）

## 期待される効果

1. **品質向上**: 一貫したサイズと構造のモジュール
2. **開発効率**: 明確なガイドラインによる開発時間短縮
3. **保守性**: 自動検証による品質維持
4. **利用性**: トークン効率的な指示書生成

## 関連Issue
- #35: モジュラーシステムのトークン数削減

## 添付資料
- [モジュールサイズ基準調査報告書](./module_size_standards_issue.md)

---

## アクションアイテム

- [ ] このIssueをGitHubに登録
- [ ] 関係者との議論・合意形成
- [ ] 実装計画の詳細化
- [ ] 実装開始