# AI指示書キット システム設計総合まとめ

**作成日**: 2025-07-27  
**概要**: サブエージェント調査から始まり、システム分離、ペルソナ・タスク設計まで議論した内容の総合まとめ

## 1. 議論の経緯

### 1.1 出発点：Claude Codeサブエージェント機能の調査
- Claude CodeのTaskツール（サブエージェント）機能の技術調査
- 最大10並列、独立したコンテキストウィンドウ
- 明示的な指示が必要（デフォルトでは慎重な使用）

### 1.2 課題認識：AI中立性の必要性
- Claude Code以外のAI（ChatGPT、Gemini等）でも使える設計
- 特定のAI機能に依存しない汎用的なシステム

### 1.3 進化：3システム分離の提案
- チェックポイントシステム（タスク管理）
- モジュラーシステム（指示書生成）
- 並列処理システム（実行最適化）

### 1.4 発展：ペルソナ・タスク分離設計
- ソフトウェア開発に限らない汎用的な業務支援
- 研究、執筆、分析など幅広い知的作業への対応

## 2. 最終的なシステムアーキテクチャ

### 2.1 全体構成
```
AI指示書キット
├── 基盤システム
│   ├── チェックポイントシステム（進捗管理）
│   ├── モジュラーシステム（動的生成）
│   └── 並列処理オプション（Claude Code専用→将来拡張）
│
├── 指示書構造
│   ├── ペルソナ（役割定義）
│   │   ├── 技術系（エンジニア、アーキテクト等）
│   │   ├── 研究系（研究者、アナリスト等）
│   │   ├── クリエイティブ系（ライター、デザイナー等）
│   │   └── ビジネス系（PM、コンサルタント等）
│   │
│   └── タスク（作業定義）
│       ├── 開発系（実装、設計等）
│       ├── 研究系（調査、分析等）
│       ├── 執筆系（文書作成、報告書等）
│       └── 計画系（企画、戦略等）
│
└── 実行モード
    ├── 手動選択（現在）
    └── AI自律選択（セミオート型を推奨）
```

### 2.2 各システムの役割

#### チェックポイントシステム
- **役割**: タスクの進捗追跡と状態管理
- **特徴**: 独立して動作可能、シンプルなAPI
- **実装**: 既存の`checkpoint.sh`を拡張

#### モジュラーシステム
- **役割**: ペルソナとタスクを組み合わせた指示書の動的生成
- **特徴**: 再利用可能なモジュール、プリセット対応
- **実装**: 既存の`generate-instruction.sh`を拡張

#### 並列処理オプション
- **役割**: AI能力に応じた実行最適化
- **特徴**: Claude Code専用からスタート、将来は他AIへ拡張
- **実装**: シンプルなヒントシステム

## 3. ペルソナ・タスク分離設計

### 3.1 基本概念
- **ペルソナ**: AIがどのような専門家として振る舞うか（HOW）
- **タスク**: 何を実行するか（WHAT）
- **利点**: 同じタスクを異なる視点で実行可能

### 3.2 構成例
```yaml
# ペルソナ例：学術研究者
persona:
  id: "academic_researcher"
  expertise: ["文献調査", "データ分析", "論文執筆"]
  thinking_pattern: "批判的思考、エビデンスベース"
  quality_standard: "査読基準準拠"

# タスク例：文献調査
task:
  id: "literature_review"
  parallelizable: true
  steps: ["検索", "スクリーニング", "分析", "統合"]
  outputs: ["文献リスト", "レビュー本文", "研究動向"]
```

## 4. AI自律実行の方式

### 4.1 推奨：セミオート型
```
ユーザー要求
    ↓
AI分析・提案
    ↓
ユーザー承認
    ↓
実行
```

**メリット**:
- 透明性（AIの判断根拠が明確）
- 制御性（ユーザーが最終決定）
- 学習効果（使用するほど理解深化）

### 4.2 実装イメージ
```bash
# ユーザー
./execute_task "競合分析をして報告書を作成"

# AI提案
提案する構成：
- Phase 1: market_researcher で competitive_analysis
- Phase 2: technical_writer で report_generation
並列実行可能: データ収集部分

承認しますか？ [Y/n]
```

## 5. 実装ロードマップ

### Phase 1: 基盤整備（1-2週間）
1. ペルソナ・タスク基本構造の実装
2. 既存モジュラーシステムの拡張
3. シンプルな並列実行ヒント機能

### Phase 2: 統合（2-3週間）
1. ペルソナ×タスクの動的組み合わせ
2. セミオート型の実装
3. チェックポイントとの連携強化

### Phase 3: 最適化（1ヶ月）
1. Claude Code並列実行の本格対応
2. プロジェクトテンプレート機能
3. 実行履歴からの学習機能

### Phase 4: 拡張（将来）
1. 他AI（Gemini CLI等）への対応
2. ハイブリッド実行モード
3. チーム協調作業機能

## 6. 現実的な実装方針

### 6.1 最小実装で始める
- ペルソナ5種類、タスク10種類から開始
- 既存システムの小規模拡張
- 並列実行は簡単なヒントレベル

### 6.2 段階的に高度化
- 使用実績を見ながら機能追加
- ユーザーフィードバックを重視
- 過度な自動化は避ける

### 6.3 既存資産の活用
- 現在のモジュールをペルソナ・タスクに再編
- checkpoint.shはそのまま利用
- generate-instruction.shを拡張

## 7. 期待される効果

### 7.1 即効性のある効果
- 指示書の構造化による品質向上
- 多様な業務への対応力向上
- AIの専門性を明確化

### 7.2 中長期的な効果
- 組織知識の形式化
- AIと人間の協調作業の最適化
- 業務プロセスの標準化

## 8. 主要な設計判断

### 8.1 採用した方針
- **ペルソナ・タスク分離**: 柔軟性と再利用性
- **セミオート型実行**: 透明性と制御性のバランス
- **段階的な並列化対応**: 現実的な実装

### 8.2 却下した方針
- **過度に複雑な並列システム**: 実装困難
- **完全自動実行**: ブラックボックス化のリスク
- **AI固有機能への強依存**: 汎用性の欠如

## 9. 次のアクション

1. **ペルソナ・タスクのディレクトリ構造作成**
2. **基本的なペルソナ・タスクの定義（各5個程度）**
3. **generate-instruction.shへのペルソナ・タスク対応**
4. **Claude Code並列ヒントの実装**
5. **ドキュメント更新とサンプル作成**

## まとめ

本設計は、AI指示書キットを単なる開発支援ツールから、汎用的な知的作業支援システムへと進化させるものです。ペルソナ・タスク分離により構造を明確化し、AI自律実行により使いやすさを向上させながら、段階的かつ現実的な実装を目指します。

特に重要なのは、**シンプルさを保ちながら拡張性を確保**することです。最初は小さく始めて、使用実績とフィードバックに基づいて成長させていく方針が、このプロジェクトの成功につながると考えます。