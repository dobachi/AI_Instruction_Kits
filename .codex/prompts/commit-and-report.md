# コミット・プッシュ・Issue報告（Codex版）

ユーザーが `/commit-and-report` に続けて入力した文字列からコミットメッセージと任意の Issue 番号を読み取ってください。通常は末尾の数値を Issue 番号、残りをコミットメッセージとみなします。曖昧なら必ず確認します。

## 手順
1. **状況確認**  
   - `git status` と `git status -sb` を実行し、現在の変更点を把握して共有します。
2. **ステージングとコミット**  
   - 全体をまとめてコミットする前に、必要があればユーザーに含めるファイルを確認します。  
   - 合意を得たら `git add -A` もしくは対象ファイルを明示的にステージングし、指定メッセージでコミットします。  
   - コミットが作成されたことを `git log -1 --stat` などで確認し結果を報告します。
3. **プッシュ**  
   - 追跡ブランチを確認し、問題なければ `git push` を実行します。  
   - 失敗した場合はエラーメッセージを解析し、対処案を提示します。
4. **Issue へのコメント（任意）**  
   - Issue 番号が与えられていれば、GitHub CLI が利用可能かを確認します。  
   - 利用できる場合は次のようなコメントを投稿します（文章は状況に合わせて調整）:
     ```bash
     gh issue comment <ISSUE_NUM> --body "✅ <コミットメッセージ>"
     ```
   - GitHub CLI が使えない場合は、手動でコメントする手順を案内します。
5. **結果の要約**  
   - どのファイルをコミットし、どのリモートにプッシュしたか、Issue へ報告したかを簡潔にまとめます。

## 安全運用ガイド
- 未追跡ファイルを含めるかどうかは都度確認します。
- 既存のコミットを強制的に上書きする操作（`--force` 等）は、ユーザーの明示的な指示があるまで行いません。
- GitHub CLI の認証が済んでいない場合は `gh auth login` を案内し、成功後に再試行します。
