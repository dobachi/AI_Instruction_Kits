#!/bin/bash
# AIã«ã‚ˆã‚‹è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œå‡ºã—ã¦å‰Šé™¤ã™ã‚‹ãƒ•ãƒƒã‚¯
# AI Instruction Kitsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæä¾›

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2

# ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚€
MESSAGE=$(cat "$COMMIT_MSG_FILE")

# AIãƒ„ãƒ¼ãƒ«ã®ã‚µã‚¤ãƒ³ã‚’æ¤œå‡ºã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³
AI_PATTERNS=(
    "ğŸ¤– Generated with"
    "Generated with Claude Code"
    "Generated with [Claude Code]"
    "Co-Authored-By: Claude"
    "Co-Authored-By: GPT"
    "Co-Authored-By: Gemini"
    "Generated by AI"
    "AI-generated"
    "ğŸ¤–"
)

# AIã‚µã‚¤ãƒ³ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
for pattern in "${AI_PATTERNS[@]}"; do
    if echo "$MESSAGE" | grep -q "$pattern"; then
        echo "âš ï¸  è­¦å‘Š: AIã«ã‚ˆã‚‹è‡ªå‹•ç”Ÿæˆã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œå‡ºã—ã¾ã—ãŸ"
        echo "âŒ ã‚³ãƒŸãƒƒãƒˆã‚’ä¸­æ­¢ã—ã¾ã™"
        echo ""
        echo "âœ… ä»£ã‚ã‚Šã«ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„:"
        
        # AIæŒ‡ç¤ºæ›¸ã‚­ãƒƒãƒˆã®commit.shãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        if [ -f "instructions/ai_instruction_kits/scripts/commit.sh" ]; then
            echo "   bash instructions/ai_instruction_kits/scripts/commit.sh \"ã‚ãªãŸã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\""
        elif [ -f "scripts/commit.sh" ]; then
            echo "   bash scripts/commit.sh \"ã‚ãªãŸã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\""
        fi
        
        echo "   git commit -m \"ã‚ãªãŸã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\""
        echo ""
        echo "æ‰‹å‹•ã§ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ›¸ãç›´ã—ã¦ãã ã•ã„ã€‚"
        exit 1
    fi
done

# å•é¡Œãªã‘ã‚Œã°ãã®ã¾ã¾ç¶šè¡Œ
exit 0